const d=e=>{document.cookie=`${e}=; Max-Age=-99999999; path=/;`},l=e=>{const t=document.cookie,i=e+"=";let o=t.indexOf("; "+i);if(o==-1){if(o=t.indexOf(i),o!=0)return null}else o+=2;let c=document.cookie.indexOf(";",o);return c==-1&&(c=t.length),decodeURI(t.substring(o+i.length,c))},h=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),b=e=>{if(e instanceof Date){const t=e.getUTCFullYear(),i=(e.getUTCMonth()+1<10?"0":"")+(e.getMonth()+1),o=(e.getUTCDate()<10?"0":"")+e.getUTCDate();return`${t}-${i}-${o}`}return""},v=(e,t)=>{const i=e.utm_source&&e.utm_source!=="null";return!!(!t&&i||["utm_source","utm_medium","utm_campaign"].every(a=>e[a]))};(function(){const t=new URLSearchParams(window.location.search),i="deriv",o=11780,c=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_ad_id","utm_click_id","utm_adgroup_id","utm_campaign_id","utm_msclk_id",["fbclid","utm_fbcl_id"]];let a={};const r=JSON.parse(decodeURIComponent(l("utm_data")));if(r!=null&&r.utm_source||(a={utm_source:document.referrer?document.referrer:"null"}),c.forEach(n=>{if(Array.isArray(n)){const[s,u]=n;t.has(s)&&(a[u]=t.get(s).substring(0,200))}else t.has(n)&&(a[n]=t.get(n).substring(0,100))}),v(a,r)){d("affiliate_tracking"),d("utm_data");const n=encodeURIComponent(JSON.stringify(a)).replaceAll("%2C",",").replaceAll("%7B","{").replaceAll("%7D","}");document.cookie=`utm_data=${n}; expires=Tue, 19 Jan 9999 03:14:07 UTC;  path=/; SameSite=None; Secure;`}if(t.has("t")||t.has("affiliate_token")){d("affiliate_tracking");const n=t.get("t")||t.get("affiliate_token");document.cookie=`affiliate_tracking=${n}; expires=Tue, 19 Jan 9999 03:14:07 UTC; path=/; SameSite=None; Secure;`}t.has("sidc")&&(d("affiliate_tracking"),document.cookie=`affiliate_tracking=${t.get("sidc")}; expires=Tue, 19 Jan 9999 03:14:07 UTC;  path=/; SameSite=None; Secure;`);const g=l("signup_device")||"{}";if(!JSON.parse(decodeURI(g).replaceAll("%2C",",")).signup_device){const n={signup_device:h()?"mobile":"desktop"},s=encodeURI(JSON.stringify(n)).replaceAll(",","%2C").replaceAll("%7B","{").replaceAll("%7D","}");document.cookie=`signup_device=${s}; path=/; SameSite=None; Secure;`}const p=l("date_first_contact")||"{}";if(!JSON.parse(decodeURI(p).replaceAll("%2C",",")).date_first_contact){const n=new WebSocket(`wss://green.binaryws.com/websockets/v3?app_id=${o}&brand=${i}`);n.onopen=function(s){n.send(JSON.stringify({time:1}))},n.onmessage=function(s){const u=JSON.parse(s.data),k={date_first_contact:b(new Date(u.time*1e3))},S=encodeURI(JSON.stringify(k)).replaceAll(",","%2C").replaceAll("%7B","{").replaceAll("%7D","}");document.cookie=`date_first_contact=${S}; path=/; SameSite=None; Secure;`,n.close()}}t.has("gclid")&&(d("gclid"),document.cookie=`gclid=${t.get("gclid")}; path=/; SameSite=None; Secure;`)})();const _=e=>{const t=e.querySelector('[data-dwp-field="email"]'),i=e.querySelector('[data-dwp-field="tc-agreement"]'),o=e.querySelector('[data-dwp-button="signup"]');if(!t||!o)return;const c=t.value.trim(),a=c&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c),r=i?i.checked:!0;a&&r?(o.disabled=!1,o.removeAttribute("disabled")):(o.disabled=!0,o.setAttribute("disabled",""))},A=e=>{e.preventDefault(),console.log("Form submitted, but default action prevented.")},m=e=>{if(e.dataset.listenersAdded==="true")return;const t=e.querySelector('[data-dwp-field="email"]'),i=e.querySelector('[data-dwp-field="tc-agreement"]');e.querySelector('[data-dwp-button="signup"]');const o=()=>{_(e)};t&&t.addEventListener("input",o),i&&i.addEventListener("change",o);const c=e.closest("form")||e.querySelector("form");c&&c.addEventListener("submit",A),o(),e.dataset.listenersAdded="true"},y=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&(i.matches('[data-dwp-form="signup"]')||i.querySelector('[data-dwp-form="signup"]'))&&(m(i),_(i))})})});y.observe(document.body,{childList:!0,subtree:!0});const f=()=>{document.querySelectorAll('[data-dwp-form="signup"]').forEach(t=>{m(t),_(t)})};document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f();
